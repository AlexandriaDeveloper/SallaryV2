


<button mat-raised-button color="primary" [matMenuTriggerFor]="beforeMenu">أضف <mat-icon>settings</mat-icon></button>
<mat-menu color="primary" #beforeMenu="matMenu" xPosition="after">
  <button color="primary" mat-menu-item (click)="openAddEmployeeDialog()">
    أضف موظف
    <mat-icon>group_add</mat-icon>
  </button>
  <button color="primary" mat-menu-item (click)="openCollectionDialog()"> أضف مجموعه

    <mat-icon>groups</mat-icon>
  </button>

  <button color="primary" mat-menu-item [routerLink]="'/form-details/'+formId+'/employee-order-form'">  اضف أوامر

    <mat-icon>groups</mat-icon>
  </button>

  <button color="primary" mat-menu-item (click)="openAddSubscriptionDialog()">  اضف اشتراكات

    <mat-icon>groups</mat-icon>
  </button>
  <button color="primary" mat-menu-item [routerLink]="'/form/form-details/'+formId+ '/uploadSubscription'">  رفع ملف اشتراكات

    <mat-icon>upload</mat-icon>

  </button>
  <button color="primary" mat-menu-item [routerLink]="'/form/form-details/periodic-subscription/'+formId">  بيانات اشتراكات

    <mat-icon>account_circle</mat-icon>
  </button>

</mat-menu>


<div class="mat-elevation-z8">

  <table mat-table class="full-width-table" matSort aria-label="Elements" fixedLayout="true"  cdkDropList (cdkDropListDropped)="drop($event)" >

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef ></th>
      <td mat-cell *matCellDef="let row">
      <button mat-mini-fab color="primary" [routerLink]="'/employee/details/'+row.employeeId" [queryParams]="{formId : formId}"
      routerLinkActive="router-link-active">
        <mat-icon>badge</mat-icon>
      </button>

      <button mat-mini-fab color="warn" (click)="deleteEmployeeFromForm(row)">
        <mat-icon>group_remove</mat-icon>
      </button>
      </td>
    </ng-container>


    <ng-container matColumnDef="employeeTabCode">
      <th mat-header-cell *matHeaderCellDef >
        <app-table-search-box [param]="enmployeeFormParam"
        [elementName]="'employeeTabCode'"
        [sort]="true"
        [label]="'كود طب'"
        (clearEvent)="clearSerach($event)"
        (sortEvent)="sortData($event)"
        (searchEvent)="searchBox($event)">
       </app-table-search-box>
      </th>
      <td mat-cell *matCellDef="let row">{{row.employeeTabCode}}</td>
    </ng-container>

    <ng-container matColumnDef="employeeTegaraCode">
      <th mat-header-cell *matHeaderCellDef >
        <app-table-search-box [param]="enmployeeFormParam"
        [elementName]="'employeeTegaraCode'"
        [sort]="true"
        [label]="' كود تحارة'"
        (clearEvent)="clearSerach($event)"
        (sortEvent)="sortData($event)"
        (searchEvent)="searchBox($event)">
       </app-table-search-box>
      </th>
      <td mat-cell *matCellDef="let row">{{row.employeeTegaraCode}}</td>
    </ng-container>
      <ng-container matColumnDef="employeeName">
        <th mat-header-cell *matHeaderCellDef >
          <app-table-search-box [param]="enmployeeFormParam"
          [elementName]="'employeeName'"
          [sort]="true"
          [label]="' اسم الموظف'"
          (clearEvent)="clearSerach($event)"
          (sortEvent)="sortData($event)"
          (searchEvent)="searchBox($event)">
         </app-table-search-box>
        </th>
      <td mat-cell *matCellDef="let row">{{row.employeeName}}</td>
    </ng-container>

    <ng-container matColumnDef="employeeNationalId">
      <th mat-header-cell *matHeaderCellDef >
        <app-table-search-box [param]="enmployeeFormParam"
        [elementName]="'employeeNationalId'"
        [sort]="true"
        [label]="' الرقم القومى'"
        (clearEvent)="clearSerach($event)"
        (sortEvent)="sortData($event)"
        (searchEvent)="searchBox($event)">
       </app-table-search-box>
      </th>
    <td mat-cell *matCellDef="let row">{{row.employeeNationalId}}</td>
  </ng-container>
  <ng-container matColumnDef="employeeSection">
    <th mat-header-cell *matHeaderCellDef >
      <app-table-search-box [param]="enmployeeFormParam"
      [elementName]="'employeeSection'"
      [sort]="true"
      [label]="' الوظيفه'"
      (clearEvent)="clearSerach($event)"
      (sortEvent)="sortData($event)"
      (searchEvent)="searchBox($event)">
     </app-table-search-box>
    </th>
  <td mat-cell *matCellDef="let row">{{row.employeeSection}}</td>
</ng-container>


    <ng-container matColumnDef="formDate">
      <th mat-header-cell *matHeaderCellDef >
    تاريخ الاستمارة
      </th>

      <td mat-cell *matCellDef="let row">{{row.formDate |date}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>


    <tr mat-row *matRowDef="let row;  columns: displayedColumns" cdkDrag>
      <div class="example-custom-placeholder" *cdkDragPlaceholder></div>
      {{i+1}}
    </tr>
<tr mat-row>



</tr>
  </table>

  <mat-paginator #paginator
  (page)="handlePageEvent($event)"
  [pageSizeOptions]="[15, 50, 100]"
   [length]="enmployeeFormParam?.length"
   [pageIndex]="enmployeeFormParam?.pageIndex"
   [pageSize]="enmployeeFormParam?.pageSize"

   aria-label="Select page">
</mat-paginator>
</div>
